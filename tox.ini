[pytest]
strict = true
testpaths = tests


[flake8]
ignore =
    E203
exclude =
    .git,
    __pycache__,
    docs/conf.py,
max-complexity = 10


[tox]
envlist = py27,py35,py36,py37,py38
isolated_build = True


[testenv:py27]
extras = tests
commands = coverage run -m pytest {posargs}


[testenv:py37]
# Python 3.6+ has a number of compile-time warnings on invalid string escapes.
# PYTHONWARNINGS=d and --no-compile below make them visible during the Tox run.
install_command = pip install --no-compile {opts} {packages}
setenv =
    PYTHONWARNINGS=d
extras = tests
commands = coverage run -m pytest {posargs}


[testenv:py38]
# Python 3.6+ has a number of compile-time warnings on invalid string escapes.
# PYTHONWARNINGS=d and --no-compile below make them visible during the Tox run.
basepython = python3.8
install_command = pip install --no-compile {opts} {packages}
setenv =
    PYTHONWARNINGS=d
extras = tests
commands = coverage run -m pytest {posargs}
